# Replicate API Setup Guide

## ✅ Replicate Integration Complete!

Your HumGod app has been successfully updated to use the Replicate API for high-quality AI music generation.

## 🔑 Setup Your Replicate API Token

1. **Get your API token:**
   - Visit: https://replicate.com/account/api-tokens
   - Sign up or log in to your Replicate account
   - Create a new API token

2. **Set the environment variable:**
   ```bash
   export REPLICATE_API_TOKEN="your_token_here"
   ```

   Or create a `.env` file in your project root:
   ```
   REPLICATE_API_TOKEN=your_token_here
   ```

## 🎵 What's New

### Real AI Music Generation
- **High-quality audio**: Using Meta's MusicGen model via Replicate
- **Melody mode**: Perfect for converting hums/beatboxing to instruments
- **30-second max**: Generates up to 30 seconds of music
- **Multiple instruments**: Piano, guitar, violin, synth, drums, bass

### Fallback System
- If Replicate API fails → Falls back to mock audio
- If no API token → Shows helpful error message
- Always works, even without API key

## 🚀 How to Test

1. **Start your server:**
   ```bash
   npm start
   ```

2. **Check API status:**
   - Visit: http://localhost:3001/health
   - Should show: `{"status":"OK"}`

3. **Test music generation:**
   - Use your web interface
   - Record some audio (hum, beatbox, whistle)
   - Select an instrument
   - Generate music!

## 💰 Pricing

- **Replicate pricing**: ~$0.01-0.05 per generation
- **Free tier**: 1,000 free predictions per month
- **Pay-as-you-go**: Only pay for what you use

## 🔧 Configuration

The app is configured to use:
- **Model**: `meta/musicgen:7a76a8258b23fae65c5a22debb8841d1d7e816b75c2f2428cd18694af0a5a56`
- **Version**: Melody (best for audio input)
- **Max duration**: 30 seconds
- **Quality**: High (classifier_free_guidance: 3)

## 🛠️ Troubleshooting

### "Replicate API token not configured"
- Make sure you've set the `REPLICATE_API_TOKEN` environment variable
- Restart your server after setting the variable

### "No audio generated by Replicate"
- Check your Replicate account balance
- Verify the API token is correct
- Check Replicate's status page

### "Failed to download audio"
- Network connectivity issue
- Replicate server temporarily unavailable
- App will fallback to mock audio

## 📊 Monitoring

The app logs all API calls:
- ✅ Successful generations
- ❌ API errors with details
- 🔄 Fallback to mock audio
- 💰 Usage tracking

## 🎯 Next Steps

1. Set your API token
2. Test the integration
3. Deploy to production
4. Monitor usage and costs
5. Scale as needed

Your HumGod app is now powered by professional-grade AI music generation! 🎵
